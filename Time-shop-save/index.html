<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Time Shop Save — Welcome</title>

  <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0' x2='1'><stop offset='0' stop-color='%237b2ff7'/><stop offset='1' stop-color='%23ff6ec7'/></linearGradient></defs><rect width='100' height='100' rx='16' fill='url(%23g)'/><text x='50' y='60' font-family='Inter,Arial,sans-serif' font-weight='800' font-size='36' text-anchor='middle' fill='%23070416'>TSS</text></svg>">
  <link rel="apple-touch-icon"
        href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'><defs><linearGradient id='g2' x1='0' x2='1'><stop offset='0' stop-color='%237b2ff7'/><stop offset='1' stop-color='%23ff6ec7'/></linearGradient></defs><rect width='120' height='120' rx='20' fill='url(%23g2)'/><text x='60' y='78' font-family='Inter,Arial,sans-serif' font-weight='800' font-size='44' text-anchor='middle' fill='%23070416'>TSS</text></svg>">
  <meta name="theme-color" content="#7b2ff7">

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700,800&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg1: #070416;
      --g1: #7b2ff7; --g2: #ff6ec7; --g3: #2be7ff;
      --text: #eaf3ff;
      --muted: rgba(234,243,255,0.65);
      --accent-grad: linear-gradient(90deg, var(--g1), var(--g2), var(--g3));
    }
    html, body {
      margin: 0; padding: 0;
      font-family: Inter, sans-serif;
      color: var(--text);
      background: var(--bg1);
      overflow-x: hidden;
    }

    header {
      display: flex; align-items: center; justify-content: space-between;
      padding: 20px 40px;
      background: rgba(7,4,22,0.95);
      backdrop-filter: blur(6px);
      position: sticky; top: 0; z-index: 100;
    }

    .logo { display: flex; align-items: center; gap: 10px; }
    .logo-mark {
      width: 56px; height: 56px; border-radius: 12px;
      display: flex; align-items: center; justify-content: center;
      font-weight: 800; background: var(--accent-grad); color: #070416;
      box-shadow: 0 0 20px rgba(123,47,247,0.25);
    }

    .btn {
      padding: 12px 20px; border-radius: 10px; cursor: pointer;
      font-weight: 600; border: none; transition: all .3s ease;
    }
    .btn.primary { background: var(--accent-grad); color: #070416; }
    .btn.ghost { border: 1px solid rgba(255,255,255,0.2); background: transparent; color: var(--text); }
    .btn:hover { transform: translateY(-3px); }

    .hero {
      text-align: center;
      padding: 80px 20px 100px;
      background: radial-gradient(circle at 30% 20%, rgba(123,47,247,0.08), transparent),
                  linear-gradient(180deg, #05020b, #0b0630, #07132a);
    }

    .hero h2 {
      font-size: 30px; font-weight: 800;
      background: var(--accent-grad); -webkit-background-clip: text; color: transparent;
    }
    .hero p { color: var(--muted); max-width: 600px; margin: 10px auto 30px; }

    .cta-row { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }

    .socials {
      display: flex; gap: 18px; justify-content: center; margin-top: 30px;
    }
    .socials a {
      width: 52px; height: 52px; border-radius: 16px;
      display: flex; align-items: center; justify-content: center;
      background: var(--accent-grad); color: #070416;
      font-size: 26px; text-decoration: none;
      box-shadow: 0 0 20px rgba(123,47,247,0.35);
      transition: all .3s ease;
    }
    .socials a:hover { transform: scale(1.2) rotate(5deg); }

    .how-it-works {
      padding: 60px 20px 80px; background: #08071b;
    }
    .how-it-works h3 {
      text-align: center; font-size: 26px;
      background: var(--accent-grad); -webkit-background-clip: text; color: transparent;
      margin-bottom: 30px;
    }

    .steps {
      display: grid; grid-template-columns: repeat(auto-fit,minmax(260px,1fr));
      gap: 24px; max-width: 1000px; margin: 0 auto;
    }
    .step {
      background: rgba(255,255,255,0.04);
      border-radius: 14px; padding: 20px; text-align: center;
      transition: all .3s ease; box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    }
    .step:hover { transform: translateY(-6px); }

    .step img {
      width: 100%; height: 200px;
      border-radius: 10px;
      object-fit: cover;
      margin-bottom: 15px;
      border: 2px solid rgba(255,255,255,0.08);
    }

    .step p { color: var(--muted); font-size: 14px; }

    .stats {
      display: flex; justify-content: center; flex-wrap: wrap; gap: 20px; margin-top: 60px;
    }
    .stat {
      background: rgba(255,255,255,0.05);
      border-radius: 12px; padding: 16px 28px;
      text-align: center; min-width: 150px;
    }
    .stat h4 { margin: 0; font-size: 22px; color: var(--g2); }
    .stat span { color: var(--muted); font-size: 13px; }

    footer { background: #060518; text-align: center; padding: 30px; color: var(--muted); font-size: 13px; }

    #splash {
      position: fixed; inset: 0; display:flex; align-items:center; justify-content:center;
      background: linear-gradient(180deg, rgba(7,4,22,0.98), rgba(7,4,22,0.92));
      z-index: 1100; transition: opacity .4s ease;
    }
    #splash.hidden { opacity: 0; visibility: hidden; pointer-events:none; }

    .loader-box {
      width: 120px; height: 120px; border-radius:16px;
      background: var(--accent-grad); display:flex; align-items:center; justify-content:center;
      color:#070416; font-weight:800; font-size:28px;
      box-shadow: 0 12px 40px rgba(123,47,247,0.18);
    }

    @media(max-width:600px){
      header{flex-direction:column;gap:10px;padding:10px 20px;}
      .hero h2{font-size:24px;}
      .socials { gap: 10px; }
    }
  </style>
</head>

<body>
<header>
  <div class="logo">
    <div class="logo-mark">TSS</div>
    <div>
      <h1>Time Shop Save</h1>
      <small style="color:var(--muted)">Local shops • Smart pickups</small>
    </div>
  </div>
  <div>
    <button class="btn ghost" id="btnHow">How it works</button>
    <button class="btn primary" id="btnStart">Let’s Begin</button>
  </div>
</header>

<section class="hero">
  <h2>Save Time. Shop Smart. Live Better.</h2>
  <p>Connect with your nearest shop, schedule pickups, and skip long lines with Time Shop Save.</p>
  <div class="cta-row">
    <button class="btn primary" id="btnCustomer">Join as Customer</button>
    <button class="btn ghost" id="btnShop">Join as Shopkeeper</button>
  </div>

  <div class="socials">
    <a href="https://wa.me/447842063898" target="_blank" title="WhatsApp">
      <img src="https://cdn-icons-png.flaticon.com/512/3670/3670051.png" width="26" height="26" alt="WhatsApp"/>
    </a>
    <a href="https://www.instagram.com" target="_blank" title="Instagram">
      <img src="https://cdn-icons-png.flaticon.com/512/174/174855.png" width="26" height="26" alt="Instagram"/>
    </a>
    <a href="https://www.tiktok.com" target="_blank" title="TikTok">
      <img src="https://cdn-icons-png.flaticon.com/512/3046/3046120.png" width="26" height="26" alt="TikTok"/>
    </a>
  </div>
</section>

<section class="how-it-works" id="how-section">
  <h3>How It Works</h3>
  <div class="steps">
    <div class="step">
      <img src="https://images.unsplash.com/photo-1543165365-c7e6691b85e7?w=600" alt="Find shops">
      <h4>1. Find Nearby Shops</h4>
      <p>Browse nearby shops instantly using smart filters for what you need faster.</p>
    </div>
    <div class="step">
      <img src="https://images.unsplash.com/photo-1616627456363-5d6b07b62889?w=600" alt="Order">
      <h4>2. Place Your Order</h4>
      <p>Select items, confirm pickup time, and pay securely.</p>
    </div>
    <div class="step">
      <img src="https://images.unsplash.com/photo-1556742049-3c52d6e88c62?w=600" alt="Pickup">
      <h4>3. Pickup Instantly</h4>
      <p>Arrive at your scheduled time — your order will be ready. No waiting, just convenience.</p>
    </div>
  </div>

  <div class="stats">
    <div class="stat">
      <h4 id="users">1000+</h4>
      <span>Active Users</span>
    </div>
    <div class="stat">
      <h4 id="shops">100+</h4>
      <span>Partner Shops</span>
    </div>
    <div class="stat">
      <h4 id="saves">500+</h4>
      <span>Minutes Saved</span>
    </div>
  </div>
</section>

<footer>
  By continuing you agree to our Terms & Privacy • © 2025 Time Shop Save
</footer>

<div id="splash"><div class="loader-box">TSS</div></div>

<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js"></script>

<script>
  // Splash screen logic
  document.body.style.overflow = 'hidden';
  setTimeout(function() {
    document.getElementById('splash').classList.add('hidden');
    document.body.style.overflow = '';
  }, 1000);

  // Button navigation logic
  document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('btnHow').onclick = function() {
      document.getElementById('how-section').scrollIntoView({behavior:'smooth'});
    };
    document.getElementById('btnStart').onclick = function() {
      window.location.href = 'explore.html';
    };
    document.getElementById('btnCustomer').onclick = function() {
      window.location.href = 'customer-login.html';
    };
    document.getElementById('btnShop').onclick = function() {
      window.location.href = 'shopkeeper-login.html';
    };
  });

  // --- FIREBASE STATS LOGIC ---
  const firebaseConfig = {
    apiKey: "AIzaSyCws2eOt3muKCpjHIxB3vUlOHGA06xLhtc",
    authDomain: "time-shop-save.firebaseapp.com",
    projectId: "time-shop-save",
    storageBucket: "time-shop-save.firebasestorage.app",
    messagingSenderId: "1037284454386",
    appId: "1:1037284454386:web:a863e690cc63049e1cc56b"
  };
  
  try {
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Fetch live stats from Firestore
    async function loadStats() {
      try {
        // 1. Count Customers
        const usersSnap = await db.collection('users').where('role', '==', 'customer').get();
        const userCount = usersSnap.size;
        document.getElementById('users').textContent = userCount + '+';

        // 2. Count Shops (check both 'shopkeepers' collection or 'users' with role 'shop')
        let shopCount = 0;
        const shopSnap1 = await db.collection('shopkeepers').get();
        shopCount += shopSnap1.size;
        
        // If shopkeepers are stored in users collection instead:
        if (shopCount === 0) {
           const shopSnap2 = await db.collection('users').where('role', '==', 'shop').get();
           shopCount = shopSnap2.size;
        }
        document.getElementById('shops').textContent = shopCount + '+';

        // 3. Estimate Minutes Saved (e.g. 1 order = 30 mins saved)
        const ordersSnap = await db.collection('orders').get();
        const ordersCount = ordersSnap.size;
        const minutes = ordersCount * 30; // Estimated 30 mins saved per order
        
        // Format large numbers (e.g. 1.2k)
        let displayMinutes = minutes;
        if(minutes > 1000) displayMinutes = (minutes / 1000).toFixed(1) + 'k';
        document.getElementById('saves').textContent = displayMinutes + '+';

      } catch(e) {
        console.warn("Could not load stats from cloud", e);
        // Fallback or leave as "..."
        document.getElementById('users').textContent = '0+';
        document.getElementById('shops').textContent = '0+';
        document.getElementById('saves').textContent = '0+';
      }
    }

    loadStats();

  } catch(e) {
    console.error("Firebase init failed on index", e);
  }
</script>
</body>
</html>